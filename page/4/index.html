<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="java redis mysql mybatis">
<meta property="og:type" content="website">
<meta property="og:title" content="大东山下">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="大东山下">
<meta property="og:description" content="java redis mysql mybatis">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大东山下">
<meta name="twitter:description" content="java redis mysql mybatis">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>大东山下</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">大东山下</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/git_ssh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/git_ssh/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><h2 id="官网-http-www-git-scm-com"><a href="#官网-http-www-git-scm-com" class="headerlink" title="官网 http://www.git-scm.com/  "></a>官网 <a href="http://www.git-scm.com/" target="_blank" rel="noopener">http://www.git-scm.com/</a>  </h2><ol>
<li>github<br>username :tonghuajianghan<br>email :<a href="mailto:tonghuajianghan@gmail.com" target="_blank" rel="noopener">tonghuajianghan@gmail.com</a><br>password : 百度  </li>
</ol>
<hr>
<ol start="2">
<li>创建git仓库  </li>
</ol>
<p>添加用户名和密码：  </p>
<blockquote>
<p>git config –global user.name “jh” （github登录名）<br>git config –global user.email “<a href="mailto:tonghuajianghan@gmail.com" target="_blank" rel="noopener">tonghuajianghan@gmail.com</a>“（github登陆邮箱）  </p>
</blockquote>
<p>初始化git本地存储库：<br>创建一个文件-&gt;cd 这个文件夹（例：cd E：note）<br>-&gt;git init（初始化本地git）<br>或<br>图形化界面Git GUI创建一个新版本库<br>或<br>克隆一个本地存储库  </p>
<blockquote>
<p>cd f:<br>$ git clone git://github.com/schacon/grit.git  </p>
</blockquote>
<p>Eclipse Git 插件：<br>右键项目名-&gt;Team-&gt;share project -&gt;Git-&gt;<br>-&gt;选择文件位置（存储库）<br>-&gt;选择版本名（项目所属位置）  </p>
<hr>
<ol start="3">
<li>git本地仓库与github连接  </li>
</ol>
<p>ssh 操作<br>1).生成ssh密钥在Administrator/.ssh（文件位置，默认生成）<br>这个格式改过，每个git版本有些许的不同：  </p>
<p>格式1:</p>
<blockquote>
<p>$ssh keygen -t rsa -C “<a href="mailto:tonghuajianghan@gmail.com" target="_blank" rel="noopener">tonghuajianghan@gmail.com</a>“<br>可能报错：<br>ssh: Could not resolve hostname keygen: Name or service not known  </p>
</blockquote>
<p>格式2：</p>
<blockquote>
<p>$ssh-keygen -t rsa -C “<a href="mailto:tonghuajianghan@gmail.com" target="_blank" rel="noopener">tonghuajianghan@gmail.com</a>“  </p>
</blockquote>
<p>生成 id_rsa 和 id_rsa.pub 两个秘钥文件<br>接着又会提示你输入两次密码（该密码是你push文件的时候要输入的密码，<br>而不是github管理者的密码）  </p>
<p>2).添加你的 SSH key 到 github上面去<br>account setting下设置  </p>
<p>3).新建本地版本库<br>创建一个文件，在文件下<br>git init 就创建一个git本地版本库<br>生成一个.git文件<br>sts右击项目——&gt;Team-&gt;share Patch<br>-&gt;选中刚才设置的git本地版本库就行  </p>
<p>4).新建github远程版本库（在github网站上新建）<br>  4.1new repository -&gt;create Repository-&gt;完成<br>  4.2Create a new repository on the command line  </p>
<p>touch README.md<br>git init<br>git add README.md<br>git commit -m “first commit”<br>git remote add origin <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:lizhenyu/helloworld.git<br>git push -u origin master<br>Push an existing repository from the command line  </p>
<p>5). 连接本地版本库与远程版本库<br>origin是默认已有远程版本库<br>$git remote -v 列出远程版本库详细内容  </p>
<p>要添加一个新的远程仓库,可以指定一个简单的名字,<br>以便将来引用,运行 git remote add [shortname] [url]:  </p>
<p>例1：  </p>
<blockquote>
<p>git remote add origin <a href="https://github.com/lizhenyu/helloworld.git" target="_blank" rel="noopener">https://github.com/lizhenyu/helloworld.git</a><br>git push -u origin master    </p>
</blockquote>
<p>例2：  </p>
<blockquote>
<p>$git remote add origintestgit0001 <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tonghuajianghan/firstdemo.git<br>                (用于本地标名识)，取代firstdemo.git  </p>
</blockquote>
<p>$ git push -u origin master<br>Counting objects: 19, done.<br>Delta compression using up to 4 threads.<br>Compressing objects: 100% (19/19), done.<br>Writing objects: 100% (19/19), 13.73 KiB, done.<br>Total 23 (delta 6), reused 0 (delta 0)<br>To <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tonghuajianghan/firstdemo.git<br>  [new branch]      master -&gt; master<br>Branch master set up to track remote branch master from origin.<br>把本地库的内容推送到远程，用git push命令，实际上是把当前分支master推送到远程。<br>由于远程库是空的，我们第一次推送master分支时，<br>加上了-u参数，Git不但会把本地的master分支内容推送的远程新的master分支，<br>还会把本地的master分支和远程的master分支关联起来，  </p>
<p>6).再次提交远程版本库<br>$ git push origin master<br>在以后的推送或者拉取时就可以简化命令。<br>只要本地作了提交，就可以通过命令：  </p>
<p>7).<br>将某个远程主机的更新，全部取回本地。<br>$ git fetch &lt;远程主机名&gt;<br>默认情况下，git fetch取回所有分支（branch）的更新。<br>如果只想取回特定分支的更新，可以指定分支名。<br>$ git fetch &lt;远程主机名&gt; &lt;分支名&gt;<br>比如，取回origin主机的master分支。<br>$ git fetch origin master<br>所取回的更新，在本地主机上要用”远程主机名/分支名”的形式读取。<br>比如origin主机的master，就要用origin/master读取。  </p>
<p>8).克隆远程服务器仓库到本地：<br>$git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tonghuajianghan/firstdemo.git  </p>
<p>9).git 提交时，忽略某些文件  </p>
<ul>
<li>error:<blockquote>
<p>git无法pull仓库refusing to merge unrelated histories<br>git pull origin master –allow-unrelated-histories</p>
</blockquote>
</li>
</ul>
<hr>
<p>git基本命令：  </p>
<p>只是用于提交的用户名和邮箱（用作标示）<br>$git config –global user.name “”<br>$git config –global user.email “”  </p>
<p>显示config配置<br>$git config –list  </p>
<p>updates were rejected because the tip<br>远程版本库高于本地版本库<br>应该先pull  </p>
<hr>
<p>git branch  </p>
<p>git branch 不带参数：列出本地已经存在的分支，<br>并且在当前分支的前面加“*”号标记  </p>
<p>git branch -r 列出远程分支  </p>
<p>git branch -a 列出本地分支和远程分支  </p>
<p>git branch 创建一个新的本地分支，需要注意，<br>此处只是创建分支，不进行分支切换<br>example: git branch mybranch  </p>
<p>$ git checkout -b iss53 新建并切换  </p>
<p>git branch -m | -M oldbranch newbranc<br>重命名分支，如果newbranch名字分支已经存在，<br>则需要使用-M强制重命名，否则，使用-m进行重命名。  </p>
<p>git branch -d | -D branchname<br>删除branchname分支  </p>
<p>git branch -d -r branchname<br>删除远程branchname分支  </p>
<p>要切换到其他分支，可以执行 git checkout 命令<br>$ git checkout testing<br>当添加文件时，没有git add ，git不会对文件进行监听<br>这样在切换分支时，文件不会受到影响  </p>
<p>不同分支初始化时，均继承master的文件  </p>
<p>git merge 合并  </p>
<hr>
<p>git 删除文件  </p>
<p>在被 git 管理的目录中删除文件时，可以选择如下两种方式来记录删除动作:<br>一、rm + git commit -am “abc”<br>二、git rm + git commit -m “abc”<br>另外，git add . 仅能记录添加、改动的动作，删除的动作需靠 git rm 来完成。  </p>
<p>最后，rm 删除的文件是处于 not staged 状态的，<br>也就是一种介于 “未改动” 和 “已提交过” 之间的状态。  </p>
<hr>
<p>git .gitignore<br>    注意空格！！！  </p>
<pre><code>在 .git 相同文件夹下新建.gitignore文件  

#注释  
/build/ 忽略根目录下build文件夹下的所有文件  
</code></pre><hr>
<p>git 回滚 reset  </p>
<p>本地回滚  </p>
<p>git reset –soft | –mixed | –hard<br>                    默认  </p>
<p>–mixed<br>会保留源码,只是将git commit和index 信息回退到了某个版本.  </p>
<p>–soft<br>保留源码,只回退到commit 信息到某个版本.不涉及index的回退,如果还需要提交,直接commit即可.  </p>
<p>–hard<br>源码也会回退到某个版本,commit和index 都回回退到某个版本.(注意,这种方式是改变本地代码仓库源码)  </p>
<hr>
<p>git commit -a -m ‘added new benchmarks’   </p>
<p>跳过使用暂存区域<br>尽管使用暂存区域的方式可以精心准备要提交的细节，<br>但有时候这么做略显繁琐。 Git 提供了一个跳过使用暂存区域的方式，<br>只要在提交的时候，给 git commit 加上 -a 选项，<br>Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤  </p>
<hr>
<p>EGit myeclipse   </p>
<p>egit <a href="http://archive.eclipse.org/egit/updates-3.0" target="_blank" rel="noopener">http://archive.eclipse.org/egit/updates-3.0</a><br>myeclipse 2013</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/redis-read/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/redis-read/" itemprop="url">redis 事物,参数解释,应用场景</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redis/" itemprop="url" rel="index">
                    <span itemprop="name">redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="redis-问题"><a href="#redis-问题" class="headerlink" title="redis 问题"></a>redis 问题</h2><pre><code>缓存淘汰策略  
分布式事物锁  
事务  
redis错误处理,网络断了,出问题应该怎么处理  
redis性能监控  
redis 缓存击穿,失效,热点key  
</code></pre><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p><a href="http://redisbook.readthedocs.io/en/latest/feature/transaction.html" target="_blank" rel="noopener">http://redisbook.readthedocs.io/en/latest/feature/transaction.html</a>  </p>
<p>Redis 通过 MULTI 、 DISCARD 、 EXEC 和 WATCH 四个命令来实现事务功能  </p>
<ol>
<li><p>WATCH 命令用于在事务开始之前监视任意数量的键：<br>当调用 EXEC 命令执行事务时， 如果任意一个被监视的键已经被其他客户端修改了， 那么整个事务不再执行， 直接返回失败。</p>
</li>
<li><p>事务提供了一种将多个命令打包，然后一次性、有序地执行的机制。<br>事务在执行过程中不会被中断，所有事务命令执行完之后，事务才能结束。<br>多个命令会被入队到事务队列中，然后按先进先出（FIFO）的顺序执行。  </p>
</li>
<li>带 WATCH 命令的事务会将客户端和被监视的键在数据库的   <code>watched_keys</code>字典中进行关联，当键被修改时，程序会将所有监视被修改键的客户端的 <code>REDIS_DIRTY_CAS</code> 选项打开。<br>只有在客户端的 <code>REDIS_DIRTY_CAS</code> 选项未被打开时，才能执行事务，否则事务直接返回失败。  </li>
<li>Redis 的事务保证了 ACID 中的一致性（C）和隔离性（I），但并不保证原子性（A）和持久性（D）。  </li>
</ol>
<h2 id="Redis的单线程属性"><a href="#Redis的单线程属性" class="headerlink" title="Redis的单线程属性"></a>Redis的单线程属性</h2><p>由于Redis是单线程机制，所以不会出现并发问题，所以可以将其作为：计数器，产生唯一ID，做秒杀系统。  </p>
<h2 id="redis-性能指标"><a href="#redis-性能指标" class="headerlink" title="redis 性能指标"></a>redis 性能指标</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">info</span><br><span class="line">    # Server  </span><br><span class="line">    redis_version:3.2.4 #Redis版本                                          </span><br><span class="line">    redis_git_sha1:00000000 #Git SHA1  </span><br><span class="line">    redis_git_dirty:0 #Git dirty flag  </span><br><span class="line">    redis_build_id:4a0a5391316325c5  </span><br><span class="line">    redis_mode:cluster  </span><br><span class="line">    os:Linux 2.6.32-358.el6.x86_64 x86_64 #Redis 服务器的宿主操作系统  </span><br><span class="line">    arch_bits:64 #架构（32 或 64 位）  </span><br><span class="line">    multiplexing_api:epoll #Redis 所使用的事件处理机制  </span><br><span class="line">    gcc_version:4.4.7 #编译 Redis 时所使用的 GCC 版本  </span><br><span class="line">    process_id:42341 #服务器进程的 PID  </span><br><span class="line">    run_id:961f96e23843202ae98dbeffb655b4f9c4d4c57e #Redis 服务器的随机标识符（用于 Sentinel 和集群）  </span><br><span class="line">    tcp_port:28001  #TCP/IP 监听端口  </span><br><span class="line">    uptime_in_seconds:60872 #运行时间（秒）  </span><br><span class="line">    uptime_in_days:0 #运行天数  </span><br><span class="line">    hz:10  </span><br><span class="line">    lru_clock:12112874 #以分钟为单位进行自增的时钟，用于 LRU 管理  </span><br><span class="line">    executable:/home/app/redis3/redis-server  </span><br><span class="line">    config_file:/home/app/redis3/./cluster/28001/redis-28001.conf  #cluster配置文件     </span><br><span class="line">    # Clients  </span><br><span class="line">    connected_clients:68  #连接的客户端数量  </span><br><span class="line">    client_longest_output_list:0 #当前连接的客户端当中，最长的输出列表  </span><br><span class="line">    client_biggest_input_buf:0 #当前连接的客户端当中，最大输入缓存  </span><br><span class="line">    blocked_clients:0 #正在等待阻塞命令（BLPOP、BRPOP、BRPOPLPUSH）的客户端的数量        </span><br><span class="line">    # Memory  </span><br><span class="line">    used_memory:831391096 #由 Redis 分配器分配的内存总量（以字节为单位）  </span><br><span class="line">    used_memory_human:792.88M  </span><br><span class="line">    used_memory_rss:888795136 #Redis分配的内存总量(该值与top命令输出一致)  </span><br><span class="line">    used_memory_rss_human:847.62M  </span><br><span class="line">    used_memory_peak:833008000 #Redis 的内存消耗峰值（以字节为单位）  </span><br><span class="line">    used_memory_peak_human:794.42M   </span><br><span class="line">    total_system_memory:33661575168  </span><br><span class="line">    total_system_memory_human:31.35G  </span><br><span class="line">    used_memory_lua:37888  </span><br><span class="line">    used_memory_lua_human:37.00K  </span><br><span class="line">    maxmemory:0  </span><br><span class="line">    maxmemory_human:0B  </span><br><span class="line">    maxmemory_policy:noeviction  </span><br><span class="line">    mem_fragmentation_ratio:1.07 #内存碎片比率  </span><br><span class="line">    mem_allocator:jemalloc-4.0.3        </span><br><span class="line">    # Persistence  </span><br><span class="line">    loading:0 #一个标志值，记录了服务器是否正在载入持久化文件  </span><br><span class="line">    rdb_changes_since_last_save:7358 #距离最近一次成功创建持久化文件之后，经过了多少秒  </span><br><span class="line">    rdb_bgsave_in_progress:0 #一个标志值，记录了服务器是否正在创建 RDB 文件  </span><br><span class="line">    rdb_last_save_time:1505285008 #最近一次成功创建 RDB 文件的 UNIX 时间戳  </span><br><span class="line">    rdb_last_bgsave_status:ok #一个标志值，记录了最近一次创建 RDB 文件的结果是成功还是失败  </span><br><span class="line">    rdb_last_bgsave_time_sec:10 #记录了最近一次创建 RDB 文件耗费的秒数  </span><br><span class="line">    rdb_current_bgsave_time_sec:-1 #如果服务器正在创建 RDB 文件，那么这个值记录的就是当前的创建操作已经耗费的秒数  </span><br><span class="line">    aof_enabled:1 #redis是否开启了aof  </span><br><span class="line">    aof_rewrite_in_progress:0 #一个标志值，记录了服务器是否正在创建 AOF 文件  </span><br><span class="line">    aof_rewrite_scheduled:0 #一个标志值，记录了在 RDB 文件创建完毕之后，是否需要执行预约的 AOF 重写操作  </span><br><span class="line">    aof_last_rewrite_time_sec:4 #最近一次创建 AOF 文件耗费的时长  </span><br><span class="line">    aof_current_rewrite_time_sec:-1 #如果服务器正在创建 AOF 文件，那么这个域记录的就是当前的创建操作已经耗费的秒数  </span><br><span class="line">    aof_last_bgrewrite_status:ok #一个标志值，记录了最近一次创建 AOF 文件的结果是成功还是失败  </span><br><span class="line">    aof_last_write_status:ok  </span><br><span class="line">    aof_current_size:633883114  </span><br><span class="line">    aof_base_size:428945179 #服务器启动时或者 AOF 重写最近一次执行之后，AOF 文件的大小  </span><br><span class="line">    aof_pending_rewrite:0 # 一个标志值，记录了是否有 AOF 重写操作在等待 RDB 文件创建完毕之后执行  </span><br><span class="line">    aof_buffer_length:0 #AOF 缓冲区的大小  </span><br><span class="line">    aof_rewrite_buffer_length:0 #AOF 重写缓冲区的大小  </span><br><span class="line">    aof_pending_bio_fsync:0 # 后台 I/O 队列里面，等待执行的 fsync 调用数量  </span><br><span class="line">    aof_delayed_fsync:12 #被延迟的 fsync 调用数量       </span><br><span class="line">    # Stats  </span><br><span class="line">    total_connections_received:619104 #服务器已接受的连接请求数量  </span><br><span class="line">    total_commands_processed:26830012 #服务器已执行的命令数量  </span><br><span class="line">    instantaneous_ops_per_sec:1159 #服务器每秒钟执行的命令数量  </span><br><span class="line">    total_net_input_bytes:1304952619 #redis网络入口流量字节数  </span><br><span class="line">    total_net_output_bytes:1009790961 #redis网络出口流量字节数  </span><br><span class="line">    instantaneous_input_kbps:55.85 #redis网络入口kps  </span><br><span class="line">    instantaneous_output_kbps:3553.89 #redis网络出口kps  </span><br><span class="line">    rejected_connections:0 #因为最大客户端数量限制而被拒绝的连接请求数量  </span><br><span class="line">    sync_full:2  </span><br><span class="line">    sync_partial_ok:0  </span><br><span class="line">    sync_partial_err:0  </span><br><span class="line">    expired_keys:0 #因为过期而被自动删除的数据库键数量  </span><br><span class="line">    evicted_keys:0 #因为最大内存容量限制而被驱逐（evict）的键数量  </span><br><span class="line">    keyspace_hits:0 #查找数据库键成功的次数  </span><br><span class="line">    keyspace_misses:0 #查找数据库键失败的次数  </span><br><span class="line">    pubsub_channels:0 #当前使用中的频道数量  </span><br><span class="line">    pubsub_patterns:0 #当前使用中的模式数量  </span><br><span class="line">    latest_fork_usec:2639  </span><br><span class="line">    migrate_cached_sockets:0        </span><br><span class="line">    # Replication  </span><br><span class="line">    role:master #当前实例的角色master还是slave  </span><br><span class="line">    connected_slaves:1  </span><br><span class="line">    slave0:ip=172.18.1.162,port=28004,state=online,offset=674295829,lag=0  </span><br><span class="line">    master_repl_offset:674298545  </span><br><span class="line">    repl_backlog_active:1  </span><br><span class="line">    repl_backlog_size:1048576  </span><br><span class="line">    repl_backlog_first_byte_offset:673249970  </span><br><span class="line">    repl_backlog_histlen:1048576       </span><br><span class="line">    # CPU  </span><br><span class="line">    used_cpu_sys:718.26 #服务器耗费的累计系统CPU  </span><br><span class="line">    used_cpu_user:468.60 #服务器耗费的累计用户CPU  </span><br><span class="line">    used_cpu_sys_children:122.46 #后台进程耗费的系统CPU   </span><br><span class="line">    used_cpu_user_children:835.28 #后台进程耗费的用户CPU        </span><br><span class="line">    # Cluster  </span><br><span class="line">    cluster_enabled:1 #是否开启集群模式 1代表是       </span><br><span class="line">    # Keyspace  </span><br><span class="line">    db0:keys=3322,expires=0,avg_ttl=0 #各个数据库的 key 的数量，以及带有生存期的 key 的数量</span><br></pre></td></tr></table></figure>
<h2 id="MONITOR"><a href="#MONITOR" class="headerlink" title="MONITOR"></a>MONITOR</h2><h2 id="SLOWLOG"><a href="#SLOWLOG" class="headerlink" title="SLOWLOG"></a>SLOWLOG</h2><p>通过SLOWLOG可以读取慢查询日志  </p>
<pre><code>127.0.0.1:6320&gt; slowlog get 1    
     1) (integer) 394689     #slowlog的唯一编号    
     2) (integer) 1480851711     #此次slowlog事件的发生时间    
     3) (integer) 10639     #耗时    
     4) 1) &quot;HGET&quot;     #slowlog事件所对应的redis 命令    
        2) &quot;hash:submit_sent_150004&quot;    
        3) &quot;15000429648122734363745165312&quot;  
</code></pre><p>分析:</p>
<ol>
<li>redis使用单线程处理客户端的请求，结果是，当请求缓慢服务时，所有其他客户端将等待这个请求被服务。如果需要执行很多的slow commands，建议把slow queries放到redis slave上去执行。  </li>
<li>关于keys命令：执行慢速命令所产生的非常常见的延迟源是在生产环境中使用KEYS命令。   如Redis文档中所述，KEYS应该只用于调试目的。<br>SCAN:<br>SCAN是基于游标的迭代器。 这意味着在每次调用命令时，服务器返回一个更新的游标，用户需要在下一次调用中用作游标参数。<br>当游标设置为0时，迭代开始，并且当服务器返回的游标为0时终止迭代。  </li>
</ol>
<h2 id="redis延迟时间排查"><a href="#redis延迟时间排查" class="headerlink" title="redis延迟时间排查"></a>redis延迟时间排查</h2><p>定义:<br>    延迟指的是客户端从发送命令到接收命令回复这段时间的最大值<br>测试一下redis的响应速度：<br>    <code>redis-cli --latency -h xxx -p xxxx</code><br>这条命令会向Redis插入示例数据来检查平均延时。 Ctrl+C可以随时结束测试；<br>出现延时的可能:<br>硬件<br>网络<br>Redis命令：  </p>
<ol>
<li>一些时间复杂度比较高的命令，如 lrem，sort，sunion等命令会花比较长时间；另外，大量的重复连接也会造成延时，重用连接是一种很好的品质；如果有大量写操作，可以使用 pipeline管道的方式（类似mysql事务），一次性提交，这样数据量也少了，连接次数也少了，不用每次都返回数据，  </li>
<li>速度自然会快很多；  </li>
<li>一个非常常见的造成Redis响应延迟的情况是在生产环境中使用KEYS命令<br>使用单线程的一个结果是，当一个请求的处理很慢时，所有其他客户端将等待该请求被处理完毕。  </li>
</ol>
<h2 id="Redis持久化："><a href="#Redis持久化：" class="headerlink" title="Redis持久化："></a>Redis持久化：</h2><ol>
<li><p>Redis持久化需要fork出一个进程来进行持久化操作，这本身就会引发延时，如果数据变化大，RDB配置时间短，<br>那这个代价还是挺大的；再加上，硬盘这东西真有点不靠谱，如果还是虚拟机上的虚拟硬盘，如果还是NFS共享目录，那这延时会让你崩溃。所以，如果系统不需要持久化，关了吧。  </p>
</li>
<li><p>Redis有两种持久化的方式：快照（RDB文件）和追加式文件（AOF文件）：<br>1) RDB持久化方式会在一个特定的间隔保存那个时间点的一个数据快照。<br>2) AOF持久化方式则会记录每一个服务器收到的写操作。在服务启动时，这些记录的操作会逐条执行从而重建出原来的数据。写操作命令记录的格式跟Redis协议一致，以追加的方式进行保存。</p>
</li>
<li><p>Redis的持久化是可以禁用的，就是说你可以让数据的生命周期只存在于服务器的运行时间里。<br>两种方式的持久化是可以同时存在的，但是当Redis重启时，AOF文件会被优先用于重建数据。</p>
</li>
<li><p>RDB  </p>
<ol>
<li>优点<br>RDB的性能很好，需要进行持久化时，主进程会fork一个子进程出来，<br>然后把持久化的工作交给子进程，自己不会有相关的I/O操作。<br>比起AOF，在数据量比较大的情况下，RDB的启动速度更快。  </li>
<li>缺点<br> RDB容易造成数据的丢失。假设每5分钟保存一次快照，如果Redis因为某些原因不能正常工作，<br> 那么从上次产生快照到Redis出现问题这段时间的数据就会丢失了。<br> RDB使用fork()产生子进程进行数据的持久化，如果数据比较大的话可能就会花费点时间，造成Redis停止服务几毫秒。如果数据量很大且CPU性能不是很好的时候，停止服务的时间甚至会到1秒。  </li>
<li>保存点（RDB的启用和禁用）<br> 配置保存点，使Redis如果在每N秒后数据发生了M次改变就保存快照文件。<br> 例如下面这个保存点配置表示每60秒，如果数据发生了1000次以上的变动，<br> Redis就会自动保存快照文件：   <pre><code>save 60 1000  
</code></pre> 禁用快照保存  <pre><code>save &quot;&quot;  
</code></pre> 保存点可以设置多个，Redis的配置文件就默认设置了3个保存点：</li>
</ol>
</li>
</ol>
<h2 id="持久化和延迟-性能的权衡"><a href="#持久化和延迟-性能的权衡" class="headerlink" title="持久化和延迟/性能的权衡"></a>持久化和延迟/性能的权衡</h2><p>为了在后台生成RDB文件，或者当AOF持久化开启时重写AOF文件，Redis需要执行fork。<br>fork操作（在主线程中执行）会引发响应延迟。  </p>
<ol>
<li>AOF + fsync always: 非常慢，只有当你确实需要时才使用该配置。  </li>
<li>AOF + fsync every second: 一个比较均衡的选择。  </li>
<li>AOF + fsync every second +no-appendfsync-on-rewrite选项为yes:也是一个比较均衡的选择，但是要避免重写期间执行fsync，<br>这可以降低磁盘压力。  </li>
<li>AOF + fsync never: 将fsync操作交给内核，减少了对磁盘的压力和延迟。  </li>
<li>RDB: 这里你可以配置触发生成RDB文件的条件。  </li>
</ol>
<h2 id="关闭主服务器持久化时，复制功能的数据安全"><a href="#关闭主服务器持久化时，复制功能的数据安全" class="headerlink" title="关闭主服务器持久化时，复制功能的数据安全"></a>关闭主服务器持久化时，复制功能的数据安全</h2><p>禁止主服务器关闭持久化的同时自动拉起。<br>在关闭主服务器上的持久化，并同时开启自动拉起进程的情况下，即便使用Sentinel来实现Redis的高可用性，也是非常危险的。<br>因为主服务器可能拉起得非常快，以至于Sentinel在配置的心跳时间间隔内没有检测到主服务器已被重启，然后还是会执行上面的数据丢失的流程。  </p>
<h2 id="redis-使用场景"><a href="#redis-使用场景" class="headerlink" title="redis 使用场景"></a>redis 使用场景</h2><ol>
<li><p>string<br> String是二进制安全的。它可以包含任何数据，图片或者其他序列化后的对象  </p>
</li>
<li><p>hash<br> hash特别适合用于存储对象,替代对象序列化/反序列化  </p>
</li>
<li><p>list<br> Lists的另一个应用就是消息队列，可以利用Lists的PUSH操作，将任务存在Lists中，然后工作线程再用POP操作将任务取出进行执行。<br> List即可以作为栈，也可以作为队列。<br> 最新列表  </p>
</li>
<li><p>set<br> 无序,不重复(自动去除重复)<br> 集合提供了求交集、并集、差集  </p>
<p> 求共同关注,相同关注等  </p>
</li>
<li><p>Sorted Set zset<br>   增加了一个权重参数score，使得集合中的元素能够按score进行有序排列<br> 可以用Sorted Sets来做带权重的队列，比如普通消息的score为1，重要消息的score为2，然后工作线程可以选择按score的倒序来获取工作任务。让重要的任务优先执行。  </p>
<ul>
<li>自动排序  </li>
<li>用户排名等<br>  比如按照用户投票时间来排序等等场景。  </li>
<li>排行榜/top n  </li>
<li>构建有优先级的队列系统  </li>
</ul>
</li>
<li><p>计数器<br> 全局增量ID生成，类似“秒杀”  </p>
</li>
<li>验证重复访问<br> 验证前端的重复请求（可以自由扩展类似情况），可以通过redis进行过滤：每次请求将request Ip、参数、接口等hash作为key存储redis（幂等性请求），设置多长时间有效期，<br> 然后下次请求过来的时候先在redis中检索有没有这个key，进而验证是不是一定时间内过来的重复提交  </li>
<li>秒杀<br> list<br> 由于 Redis 是单线程模型，lua 可以保证多个命令的原子性。  </li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/redis-q/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/redis-q/" itemprop="url">redis-q</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redis/" itemprop="url" rel="index">
                    <span itemprop="name">redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p><a href="https://www.jianshu.com/p/d5a3668d4dad" target="_blank" rel="noopener">https://www.jianshu.com/p/d5a3668d4dad</a><br>分布式缓存是网站服务端经常用到的一种技术，在读多写少的业务场景中，通过使用缓存可以有效地支撑高并发的访问量，对后端的数据库等数据源做到很好地保护.  </p>
<p>现在有很多分布式缓存，比如Redis、Memcached以及阿里的Tair等，不管我们使用的哪种缓存产品，基本上都会遇到<code>缓存击穿</code>、<code>缓存失效</code>以及<code>热点key</code>的问题.  </p>
<h3 id="缓存击穿："><a href="#缓存击穿：" class="headerlink" title="缓存击穿："></a>缓存击穿：</h3><p>查询一个数据库中不存在的数据，比如商品详情，查询一个不存在的ID，每次都会访问DB，如果有人恶意破坏，很可能直接对DB造成过大地压力。</p>
<p>缓存击穿的解决方案：<br>　　当通过某一个key去查询数据的时候，如果对应在数据库中的数据都不存在，我们将此key对应的value设置为一个默认的值，比如“NULL”，并设置一个缓存的失效时间，这时在缓存失效之前，所有通过此key的访问都被缓存挡住了。后面如果此key对应的数据在DB中存在时，缓存失效之后，通过此key再去访问数据，就能拿到新的value了。</p>
<h3 id="缓存失效-雪崩-："><a href="#缓存失效-雪崩-：" class="headerlink" title="缓存失效(雪崩)："></a>缓存失效(雪崩)：</h3><p>　　在高并发的环境下，如果此时key对应的缓存失效，此时有多个进程就会去同时去查询DB，然后再去同时设置缓存。这个时候如果这个key是系统中的热点key或者同时失效的数量比较多时，DB访问量会瞬间增大，造成过大的压力。</p>
<p>缓存失效的解决方案：</p>
<ol>
<li>将系统中key的缓存失效时间均匀地错开，防止统一时间点有大量的key对应的缓存失效；</li>
<li>重新设计缓存的使用方式，当我们通过key去查询数据时，首先查询缓存，如果此时缓存中查询不到，就通过分布式锁进行加锁，取得锁的进程查DB并设置缓存，然后解锁；其他进程如果发现有锁就等待，然后等解锁后返回缓存数据或者再次查询DB。<br> 重建缓存不能在短时间完成，可能是一个复杂计算，例如复杂的 SQL、多次 IO、多个依赖等</li>
</ol>
<h3 id="热点key："><a href="#热点key：" class="headerlink" title="热点key："></a>热点key：</h3><p>　　缓存中的某些Key(可能对应用与某个促销商品)对应的value存储在集群中一台机器，使得所有流量涌向同一机器，成为系统的瓶颈，该问题的挑战在于它无法通过增加机器容量来解决。</p>
<p>发现热点key  </p>
<p>热点key的解决方案：  </p>
<ol>
<li>客户端热点key缓存：将热点key对应value并缓存在客户端本地，并且设置一个失效时间。对于每次读请求，将首先检查key是否存在于本地缓存中，如果存在则直接返回，如果不存在再去访问分布式缓存的机器。</li>
<li>将热点key分散为多个子key，然后存储到缓存集群的不同机器上，这些子key对应的value都和热点key是一样的。当通过热点key去查询数据时，通过某种hash算法随机选择一个子key，然后再去访问缓存机器，将热点分散到了多个子key上。</li>
<li>永远不过期<br> (1) 从redis上看，确实没有设置过期时间，这就保证了，不会出现热点key过期问题，也就是“物理”不过期。<br> (2) 从功能上看，如果不过期，那不就成静态的了吗？所以我们把过期时间存在key对应的value里，如果发现要过期了，通过一个后台的异步线程进行缓存的构建，也就是“逻辑”过期<br> <strong><em>查询redis-&gt;发现过期-&gt;异步构建-&gt;输出老值</em></strong></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/redis-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/redis-install/" itemprop="url">redis-install</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redis/" itemprop="url" rel="index">
                    <span itemprop="name">redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="安装"><a href="#安装" class="headerlink" title="安装:"></a>安装:</h2><p>  下载地址：<a href="https://github.com/dmajkic/redis/downloads" target="_blank" rel="noopener">https://github.com/dmajkic/redis/downloads</a></p>
<h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务:"></a>启动服务:</h3><p>  redis-server.exe redis.conf</p>
<hr>
<h2 id="windows安装sentinel集群"><a href="#windows安装sentinel集群" class="headerlink" title="windows安装sentinel集群"></a>windows安装sentinel集群</h2><p>复制redis 3份(redis2.8以上)</p>
<ol>
<li><p>maste目录中的redis6379.conf配置如下<br><strong><em>需要绑定一下机器IP地址，切勿使用默认地址127.0.0.1，最后说明原因,配置成ipv4地址</em></strong><br>bind 192.168.31.196</p>
</li>
<li><p>slave中的redis6380.conf配置如下<br>bind 192.168.31.196<br>port 6380<br>这里配置master的地址和端口号<br> slaveof 192.168.31.196 6379<br>如果master有密码，配置如下<br> masterauth xxx</p>
</li>
<li><p>配置sentinel实例<br>创建sentinel26379.conf文件<br>bind 192.168.31.196<br>port 26379<br>dir sentinel<br>sentinel monitor mymaster 192.168.31.196 6379 1<br>sentinel down-after-milliseconds mymaster 60000<br>sentinel failover-timeout mymaster 180000<br>sentinel parallel-syncs mymaster 1  </p>
</li>
</ol>
<h2 id="启动过程"><a href="#启动过程" class="headerlink" title="启动过程"></a>启动过程</h2><ol>
<li>启动redis(主,从)<br>redis-server.exe redis.windows.conf  </li>
<li>启动sentinel<br>redis-server.exe sentinel.conf –sentinel  </li>
</ol>
<h3 id="windows启动redis-客户端"><a href="#windows启动redis-客户端" class="headerlink" title="windows启动redis 客户端"></a>windows启动redis 客户端</h3><p>redis-cli.exe -h address -p port<br>address,port 必须正确,否则cmd就会卡住.  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/Tomcat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/Tomcat/" itemprop="url">tomcat</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tomcat/" itemprop="url" rel="index">
                    <span itemprop="name">tomcat</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="默认访问"><a href="#默认访问" class="headerlink" title="默认访问"></a>默认访问</h3><p>tomcat默认访问ROOT 应用程序</p>
<h3 id="tomcat单项配置ssl"><a href="#tomcat单项配置ssl" class="headerlink" title="tomcat单项配置ssl"></a>tomcat单项配置ssl</h3><ol>
<li>生成keystore文件  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keytool -v -genkey -alias tomcat -keyalg RSA -keystore</span><br><span class="line">d:/tomcat.keystore</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注意：<br>      cn=localhost</p>
<ol start="2">
<li><p>从keystore中导出server.cer的文件  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keytool -export -trustcacerts -alias tomcat -file</span><br><span class="line">d:/server.cer -keystore d:/tomcat.keystore -storepass 123456</span><br></pre></td></tr></table></figure>
</li>
<li><p>将server.cer文件导入到jdk中的储存证书的库中  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keytool -import -trustcacerts -alias tomcat -file d:/server.cer -keystore  </span><br><span class="line">D:\Java\jdk1.6.0_19/jre/lib/security/cacerts -storepass changeit</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置tomcat的conf文件下的sever.xml文件  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;</span><br><span class="line">               maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;</span><br><span class="line">               clientAuth=&quot;false&quot; keystoreFile=&quot;D:\tomcat.keystore&quot; keystorePass=&quot;123456&quot; sslProtocol=&quot;TLS&quot; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装server.cer证书<br>将server.cer安装到受信任的根目录下</p>
</li>
</ol>
<h3 id="tomcat下配置https环境"><a href="#tomcat下配置https环境" class="headerlink" title="tomcat下配置https环境"></a>tomcat下配置https环境</h3><p>example:<br>  <a href="http://blog.csdn.net/supersky07/article/details/7407523" target="_blank" rel="noopener">http://blog.csdn.net/supersky07/article/details/7407523</a></p>
<p>tomcat下配置https环境后证书错误（双向认证）<br>tomcat 配置证书的命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">keytool -import -alias rootca.cer -keystore your_keystore </span><br><span class="line"> -storepass your_pass -trustcacerts -file c:\rootca.cer</span><br><span class="line">``` </span><br><span class="line">导入根证书时，别名不要和服务器证书alias别名相同。   </span><br><span class="line">导入服务器证书时，请注意自己的alias。  </span><br><span class="line"></span><br><span class="line">如果是单向SSL，  </span><br><span class="line">只需要在服务端部署SSL证书即可实际https://加密访问，  </span><br><span class="line">如果双向认证（服务端SSL+客户端证书认证），  </span><br><span class="line">也只需要Web Server上配置即可，完全不需要写代码。  </span><br><span class="line">  </span><br><span class="line">jdk自带的keytool与openssl  </span><br><span class="line"></span><br><span class="line">1)、keytool 与 openssl都是工具。  </span><br><span class="line">区别就是根据应用服务器或者web server不同，  </span><br><span class="line">而使用对应的工具.tomcat需要使用keytool工具。  </span><br><span class="line"></span><br><span class="line">2)、cer与crt都是证书格式，看你webserver   </span><br><span class="line">或者应用服务器支持哪种就将证书改成哪个，很简单。  </span><br><span class="line">JKS是一种格式。一般使用openssl的都是jks格式或者key格式，  </span><br><span class="line">使用keytool的都是keystore格式。  </span><br><span class="line"></span><br><span class="line">3)、至于导入根证书问题，一般都要导入根证书。  </span><br><span class="line">客户端证书你所说的导入，我没明白。我觉得客户端不需要再导入了吧，</span><br><span class="line">在服务器上做双向认证，也不需要导入，只需要从服务器上配置一下即可。</span><br><span class="line">tomcat的证书导入，是需要导入根证书（如果有中级根证书，也是需要导入的）  </span><br><span class="line"></span><br><span class="line">### eclipse tomcat servers 配置文件</span><br><span class="line"></span><br><span class="line">server.xml</span><br></pre></td></tr></table></figure></p>
<!--浏览器访问目录,是否重新加载-->
<p><context docbase="dev_pss" path="/dev_pss" reloadable="true" source="org.eclipse.jst.jee.server:dev_pss"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">### context.xml</span><br><span class="line">context.xml一个是Catalina下的文件  </span><br><span class="line">用来配置环境的.  </span><br><span class="line">我们开发大项目的时候  </span><br><span class="line">一般都是配置这个文件的来添加一个项目的  </span><br><span class="line">而不是把项目拷贝到webapp下去,  </span><br><span class="line">  </span><br><span class="line">项目底层位置</span><br></pre></td></tr></table></figure></context></p>
<p><context path="/pss-dev" docbase="E:/worksapce/wondersWorkspace/dev_pss/WebRoot"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库</span><br></pre></td></tr></table></figure></context></p>
<p><resource name="jdbc/pss" type="javax.sql.DataSource" driverclassname="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@10.1.8.217:1521:sck" username="PSS" password="xdrcft56" maxidle="2" maxwait="5000" maxactive="4"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">### tomcat通过conf-Catalina-localhost目录发布项目  </span><br><span class="line"></span><br><span class="line">注意：xml的文件名一定要和发布路径一致！ </span><br><span class="line"></span><br><span class="line">这样配置不经过eclipse直接将项目加载到tomcat中，因此不用再eclipse中启动项目</span><br><span class="line">直接驱动tomcat就行。  </span><br><span class="line"></span><br><span class="line">(配合)  </span><br><span class="line">eclipse3.2中的tomcat插件就可以直接启动tomcat，不是在eclipse中虚拟启动</span><br><span class="line"></span><br><span class="line">### tomcat 下访问localhost错误  </span><br><span class="line"> 可能是tomcat加载路径的问题，改变成127.0.0.1试试</span><br><span class="line"></span><br><span class="line">### 发布项目</span><br><span class="line">	tomcat6发布项目：</span><br><span class="line">		1.配置外部文件</span><br><span class="line">			配置%tomcat%/conf/Catalina/localhost/xx.xml</span><br><span class="line">		2.第二次发布的时候，将保存原有配置</span><br><span class="line">		3.正确重启tomcat</span><br><span class="line"></span><br><span class="line">### tomcat 配置服务器监听</span><br><span class="line">  用于eclipse的debug功能 || eclipse 调试远程tomcat || tomcat服务器配置远程调试    </span><br><span class="line">服务器tomcat端:</span><br></pre></td></tr></table></figure></resource></p>
<pre><code>bin-&gt;catalina.bat --&gt;
set JAVA_OPTS=%JAVA_OPTS% %LOGGING_MANAGER%  
set CATALINA_OPTS=-server -Xdebug -Xnoagent
</code></pre><p>   -Djava.compiler=NONE<br>    -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000<br>    rem —– Execute The Requested Command<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">本地eclipse端:  </span><br><span class="line">	servers --&gt; tomcat 6.x --&gt; 项目 --&gt;right click -&gt; Remote Java Application --&gt; Coonect --&gt;  </span><br><span class="line">	配置本地项目,远程服务器地址,端口  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## error</span><br><span class="line"></span><br><span class="line">jetty 没有问题,tomcat上就有问题  </span><br><span class="line">SAX2 driver class org.apache.xerces.parsers.SAXParser not found  </span><br><span class="line">解决:   </span><br><span class="line">https://stackoverflow.com/questions/11677572/dealing-with-xerces-hell-in-java-maven</span><br></pre></td></tr></table></figure></p>
<p><dependency><br>    <groupid>xerces</groupid><br>    <artifactid>xercesImpl</artifactid><br>    <version>2.0.2</version><br></dependency><br><code>`</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/storm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/storm/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="storm"><a href="#storm" class="headerlink" title="storm"></a>storm</h3><h2 id="2017-3-22-17-19-31"><a href="#2017-3-22-17-19-31" class="headerlink" title="2017/3/22 17:19:31 "></a>2017/3/22 17:19:31 </h2><ul>
<li>strom 安装</li>
</ul>
<ol>
<li><p>安装python<br>这是为了测试安装效果，我们将部署 storm-starter project案例中word coun程序，<br>用的是python写的multi-lang bolt，使用python 2.7.6， </p>
<p>安装路径在：<br>   C:\Python27\<br>python好像安装的时候自动就配置了环境变量<br>这个我也不知道为什么要安装，网上教程安装，我也安装了，不过没有测试是否有用   </p>
</li>
<li><p>安装并运行zookeeper</p>
<p>地址： </p>
<blockquote>
<p><a href="http://zookeeper.apache.org/doc/r3.3.6/zookeeperStarted.html#sc_Download" target="_blank" rel="noopener">http://zookeeper.apache.org/doc/r3.3.6/zookeeperStarted.html#sc_Download</a>  </p>
</blockquote>
<p>配置：</p>
<blockquote>
<p>cd zookeeper-3.3.6<br>copy conf\zoo_sample.cfg conf\zoo.cfg<br>.\bin\zkServer.cmd  (启动zookeeper服务)</p>
</blockquote>
</li>
<li><p>安装storm</p>
<p>Storm的windows官方版还没有释放，因此网上找了一些个人做的安装包。<br>windows运行版本： <a href="https://dl.dropboxusercontent.com/s/iglqz73chkul1tu/storm-0.9.1-incubating-SNAPSHOT-12182013.zip" target="_blank" rel="noopener">https://dl.dropboxusercontent.com/s/iglqz73chkul1tu/storm-0.9.1-incubating-SNAPSHOT-12182013.zip</a>  </p>
<p>source版本： <a href="https://github.com/ptgoetz/storm/tree/windows-test" target="_blank" rel="noopener">https://github.com/ptgoetz/storm/tree/windows-test</a>  </p>
</li>
<li><p>配置storm环境变量<br>   <code>STORM_HOME：D:\java\storm\storm-0.9.1</code><br>   在path中加入：</p>
<pre><code>`%STORM_HOME%\bin;C:\Python27;C:\Python27\Lib\site-packages\;C:\Python27\Scripts\`
</code></pre></li>
<li><p>启动Storm<br> storm好像是由这三部分组成的，因此需要分别启动storm的三个组件<br> 启动Nimbus<br>  <code>cd %STORM_HOME%  &gt; storm nimbus</code></p>
<p> 启动Supervisor<br>   <code>cd %STORM_HOME%  &gt; storm supervisor</code></p>
<p> 启动Storm UI<br>   <code>cd %STORM_HOME%  &gt; storm ui</code></p>
<pre><code>验证启动成功：
浏览器打开http://localhost:8080/ 可看到Storm运行。  
问题：storm ui运行在jetty中第一次启动可能看到jetty页面，刷新一次就好了  
</code></pre></li>
<li><p>部署work count  </p>
<p> 网上文档给的，不知道是什么  </p>
<p> 下载地址：<br> <a href="https://dl.dropboxusercontent.com/s/kc933u6vz2crqkb/storm-starter-0.0.1-SNAPSHOTjar-with-dependencies.jar" target="_blank" rel="noopener">https://dl.dropboxusercontent.com/s/kc933u6vz2crqkb/storm-starter-0.0.1-SNAPSHOTjar-with-dependencies.jar</a>   </p>
<p> 部署这个jar在本地：  </p>
<blockquote>
<p>storm jar storm-starter-0.0.1-SNAPSHOT-jar-with-dependencies.jar storm.starter.WordCountTopology WordCount -c nimbus.host=localhost</p>
</blockquote>
<pre><code>验证：  
刷新 Storm UI页面，会看到 “WordCount” topology显示列出，点按链接确认它处理数据。
</code></pre></li>
</ol>
<hr>
<ul>
<li>storm java 链接 </li>
</ul>
<p>代码：<br><a href="https://github.com/tonghuajianghan/storm-test/" target="_blank" rel="noopener">https://github.com/tonghuajianghan/storm-test/</a></p>
<pre><code>error1:
    java.net.SocketException: Address family not supported by protocol family: connect

    解决方法：
    ping localhost，如果没有正确回应把hosts文件配置一下试试！
    运行main class的时候添加“-Djava.net.preferIPv4Stack=true”参数试试！

error2:
    在windows下运行ExclamationTopology或者WordCountTopology时，
    报“Unable to delete file错误”

    解决方法：
    这是storm的一个bug，0.8.2版本还没有解决，这个错误在cluster.shutdown();时候抛出，
    没有什么好解决办法，注释掉shutdown()方法程序将不会自己停止，这个错误影响有限，忽略它吧。 
</code></pre><hr>
<ul>
<li>storm 集群</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/mvn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/mvn/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>maven简介：  </li>
<li>settings.xml ,pom.xml  </li>
<li>demo  </li>
<li>mvn error  </li>
<li>安装，配置  </li>
<li>引用框架包配置(<a href="http://mvnrepository.com" target="_blank" rel="noopener">http://mvnrepository.com</a>)  </li>
<li>配置mirrors ，repository  </li>
<li>解决Eclipse建立Maven项目后无法建立src/main/java资源文件夹的办法  </li>
<li>mvn 命令  </li>
<li>mvn commond build webapp java web project  </li>
<li>nux Nexus  </li>
<li>eclipse maven plugin  </li>
<li>mvn spring   </li>
<li>mvn update  </li>
<li>eclipse create mvn project  </li>
<li>mvn 引用不到链接sqllserver的jar包  </li>
</ol>
<hr>
<p>远程中央仓库的地址为 <a href="http://repo1.maven.org/" target="_blank" rel="noopener">http://repo1.maven.org/</a><br><a href="http://search.maven.org" target="_blank" rel="noopener">http://search.maven.org</a><br><a href="http://maven.oschina.net/home.html" target="_blank" rel="noopener">http://maven.oschina.net/home.html</a><br><a href="http://mvnrepository.com/" target="_blank" rel="noopener">http://mvnrepository.com/</a>  是mvn官方仓库  </p>
<hr>
<ol>
<li>maven简介：  </li>
</ol>
<p>作用：<br>用来帮助实现项目的构建、测试、打包和部署  </p>
<p>原理：<br>Maven是基于项目对象模型(POM)，<br>可以通过一小段描述信息来管理项目的构建，报告和文档的软件项目管理工具。<br>可以多个项目中共享JAR  </p>
<p>生命周期:<br>当你运行 mvn install 的时候被调用。<br>这条命令告诉 Maven 执行一系列的有序的步骤，<br>直到到达你指定的生命周期。遍历生命周期旅途中的一个影响就是，<br>Maven 运行了许多默认的插件目标，这些目标完成了像编译和创建一个 JAR 文件这样的工作。<br>此外，Maven能够很方便的帮你管理项目报告，生成站点，管理JAR文件，等等。  </p>
<p>优点：<br>在Java项目中,每个项目都有很多依赖的Jar包,<br>我们一般都放在自己项目的lib目录中,<br>这样就会导致同样的Jar包在各个不同的项目中重复出现，<br>时间长了将会浪费很大的硬盘空间。使用Maven对项目进行管理就可以解决以上问题。  </p>
<p>Maven执行原理：<br>依赖和项目构建的输出都可以由 Maven 的坐标进行唯一的区分，<br>基于这种机制，Maven 将所有项目的构件文件放置在一个统一的位置，<br>也就是 Maven 仓库。<br>所有 Maven 项目可以从同一个 Maven 仓库中获取自己所需要的依赖 JAR，<br>这节省了磁盘资源。实际的 Maven 项目中不需要存储依赖的文件，<br>只需要在 POM 文件中生成依赖关系，在构建的时候 Maven 就会自动去仓库中下载。  </p>
<p>依靠包查询：<br>我们项目中依赖的 Jar 包可以通过依赖的方式引入<br>maven是单独管理一个项目。的jar包位置，组织形式的。<br>在安装了 Maven 的机器上，会生成一个 ~.m2\repository 目录，<br>这个目录被称为本地仓库，当 Maven 查找需要的依赖时，首先会在本地查找，<br>如果本地仓库中存在，则直接使用，否则 Maven 回去远程仓库查找，<br>查找到后下载到本地进行使用。  </p>
<hr>
<ol start="2">
<li>settings.xml ,pom.xml  </li>
</ol>
<p>配置文件作用域：<br>conf/settings.xml  </p>
<p>修改maven本地仓库的位置：<br>apache-maven-3.1.2/conf/setting.xml  </p>
<p><localrepository>d:maven2</localrepository><br>当修改过后，不会自动新建/.m2文件  </p>
<p>settings.xml对于maven来说相当于全局性的配置，用于所有的项目<br>加载的方向正好相反，下级影响上级  </p>
<p>pom.xml节点的说明：  </p>
<p><project>　　　　　　pom文件的顶级节点<br>　　　　<modelversion>　　　object model版本，对Maven2和Maven3来说，只能是4.0.0　<br>　　　　<groupid>　　　　　　项目创建组织的标识符，一般是域名的倒写<br>　　　　<artifactid>　　　　定义了项目在所属组织的标识符下的唯一标识，一个组织下可以有多个项目<br>　　　　<packaging>　　　　  打包的方式，有jar、war、ear等<br>　　　　<version>　　　　　  当前项目的版本，SNAPSHOT，表示是快照版本，在开发中<br>  　　　<name>　　　　　　　 项目的名称<br>　　　　<url>　　　　　　　　项目的地址<br>　　　　<dependencies>　　 构建项目依赖的jar<br>　　　　<description>　　　　项目的描述  </description></dependencies></url></name></version></packaging></artifactid></groupid></modelversion></project></p>
<hr>
<ol start="3">
<li>demo  </li>
</ol>
<p>mvn dependency search查询位置  </p>
<p>1.mvn archetype:generate -DarchetypeCatalog=internal<br>  或mvn archetype:generate（简单）  </p>
<p>2.mvn eclipse:eclipse 在eclipse工作目录下运行<br>3.mvn tomcat:run<br>4.指定eclipse中的maven的本地仓库地址,运行命令:<br>mvn  -Declipse.workspace= <eclipse workspace路径="">   eclipse:add-maven-repo   </eclipse></p>
<p>创建依赖  </p>
<dependency><br>   <groupid>javax.servlet</groupid><br>   <artifactid>servlet-api</artifactid><br>   <version>2.5</version><br></dependency>  

<h2 id="http-www-jarvana-com-jarvana"><a href="#http-www-jarvana-com-jarvana" class="headerlink" title="http://www.jarvana.com/jarvana/   "></a><a href="http://www.jarvana.com/jarvana/" target="_blank" rel="noopener">http://www.jarvana.com/jarvana/</a>   </h2><ol start="4">
<li>mvn error  </li>
</ol>
<p>1）.出现创建不了mvn project<br>错误：can mot resolve archetype<br>windows - preference - maven -archetype<br>add remote catalog<br><a href="http://repo1.maven.org/maven2/archetype-catalog.xml" target="_blank" rel="noopener">http://repo1.maven.org/maven2/archetype-catalog.xml</a>  </p>
<p>2）.  </p>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0   
http://maven.apache.org/maven-v4_0_0.xsd">  

<p>报错：<br>Description Resource Path Location Type<br>Could not calculate build plan:<br>Failure to transfer org.apache.maven.plugins:maven-war-plugin:pom:2.1.1 from<br><a href="http://repo1.maven.org/maven2" target="_blank" rel="noopener">http://repo1.maven.org/maven2</a> was cached in the local repository,<br>resolution will not be reattempted until the update interval<br>of central has elapsed or updates are forced. Original error:<br>Could not transfer artifact org.apache.maven.plugins:maven-war-plugin:pom:2.1.1<br>from/to central (<a href="http://repo1.maven.org/maven2)" target="_blank" rel="noopener">http://repo1.maven.org/maven2)</a>: ConnectException<br>first-maven Unknown    Maven Problem<br>解决：<br>应该是连不上<a href="http://repo1.maven.org/maven2这个仓库，在pom.xml文件加一下下面的配置" target="_blank" rel="noopener">http://repo1.maven.org/maven2这个仓库，在pom.xml文件加一下下面的配置</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;repositories&gt;    </span><br><span class="line">    &lt;repository&gt;    </span><br><span class="line">      &lt;snapshots&gt;    </span><br><span class="line">        &lt;enabled&gt;false&lt;/enabled&gt;    </span><br><span class="line">      &lt;/snapshots&gt;    </span><br><span class="line">      &lt;id&gt;central&lt;/id&gt;    </span><br><span class="line">      &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;    </span><br><span class="line">      &lt;url&gt;http://repo2.maven.org/maven2&lt;/url&gt;    </span><br><span class="line">    &lt;/repository&gt;    </span><br><span class="line">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure></p>
<p>3）分析：<br>./m2/settings 影响默认conf/settiongs的配置<br>java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener  </p>
<p>4）<br>Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin错误解决方法<br>解决方法：将命令中的create改为generate：<br>mvn archetype:generate -DgroupId=com.tutorialspoint.test<br>-DartifactId=helloworld -DarchetypeArtifactId=maven-archetype-webapp  </p>
<p>5)Java compiler level does not match the version of the installed<br>  Java project facet.SSJ UnknownFaceted Project Problem (Java Version Mismatch)<br>  properties-&gt; java complier -&gt; 改成与版本相同的jre  </p>
<hr>
<ol start="5">
<li>安装，配置  </li>
</ol>
<p>1） 解压maven压缩包<br>2） 配置环境变量，添加%MAVEN_HOME%,path中添加%MAVEN_HOME%\bin<br>3） 测试安装是否成功，mvn -v<br>4） 安装eclipse的插件<br>5） eclipse创建maven项目<br>6） eclipse添加maven的配置<br>        进入MyEclipse→window→Preferences→<br>    Maven4MyEclipse→Maven→Installations→User Sittings<br>        点击右侧Browse指向%MAVEN_HOME%\conf\settings.xml<br>7）  </p>
<hr>
<ol start="6">
<li>引用包配置(<a href="http://mvnrepository.com" target="_blank" rel="noopener">http://mvnrepository.com</a>)  </li>
</ol>
<p>搜索结果<br>   引用spring mvc<br>   Spring Web MVC  </p>
<p>   引用hibernate<br>   Hibernate Core Aggregator   </p>
<p>   引用struts<br>   struts 2<br>   struts-core   </p>
<hr>
<ol start="7">
<li><p>配置mirrors ，repository  </p>
<p>覆盖中央仓库的默认地址，<br>那么这里我们就会使用的镜像了，在setting.xml里面配置<br><mirrorof>,表示只为central仓库做镜像，<br>如果想为所有的仓库做镜像那么可以改为： <mirrorof>*</mirrorof>  </mirrorof></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> &lt;mirrors&gt;  </span><br><span class="line">&lt;mirror&gt;  </span><br><span class="line">	&lt;id&gt;repo1&lt;/id&gt;  </span><br><span class="line">	&lt;name&gt;repo1&lt;/name&gt;  </span><br><span class="line">	&lt;url&gt;http://repo1.maven.org/maven2/spring/&lt;/url&gt;  </span><br><span class="line">	&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;    &lt;!--表明为central中央仓库配置镜像仓库--&gt;  </span><br><span class="line">&lt;/mirror&gt;  </span><br><span class="line"> &lt;/mirrors&gt;  </span><br><span class="line"> &lt;profiles&gt;   </span><br><span class="line">    </span><br><span class="line">	&lt;profile&gt;  </span><br><span class="line">	  &lt;id&gt;repo&lt;/id&gt;    </span><br><span class="line">	  &lt;repositories&gt;  </span><br><span class="line">		   &lt;repository&gt;    </span><br><span class="line">			  &lt;id&gt;com.springsource.repository.maven.release&lt;/id&gt;    </span><br><span class="line">			  &lt;url&gt;http://maven.springframework.org/release/&lt;/url&gt;    </span><br><span class="line">			  &lt;snapshots&gt;&lt;enabled&gt;false&lt;/enabled&gt;&lt;/snapshots&gt;    </span><br><span class="line">		   &lt;/repository&gt;   </span><br><span class="line">	  &lt;/repositories&gt;  </span><br><span class="line">   &lt;/profile&gt;  </span><br><span class="line"> </span><br><span class="line"> &lt;/profiles&gt;  </span><br><span class="line">  &lt;activeProfiles&gt;    </span><br><span class="line"> &lt;activeProfile&gt;repo&lt;/activeProfile&gt;  	  </span><br><span class="line"> &lt;/activeProfiles&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<ol start="8">
<li>解决Eclipse建立Maven项目后无法建立src/main/java资源文件夹的办法<br>在项目上右键选择properties，<br>然后点击java build path，在Librarys下，<br>编辑JRE System Library，<br>选择workspace default jre就可以了。  </li>
</ol>
<hr>
<ol start="9">
<li>mvn 命令  </li>
</ol>
<p>运行mvn command 必须在有pom.xml文件的父文件夹  </p>
<p>生成清除Eclipse项目结构：<br>mvn eclipse:eclipse<br>mvn eclipse:clean  </p>
<p>编译项目到target、安装项目到.m2文件夹下的资源库中<br>mvn install  </p>
<p>清理（删除target目录下编译内容）<br>mvn clean  </p>
<p>仅打包Web页面文件<br>mvn war:exploded  </p>
<p>编译项目<br>mvn compile  </p>
<p>打包发布<br>mvn package  </p>
<p>打包时跳过测试<br>mvn package -Dmaven.test.skip=ture  </p>
<p>编译源代码： mvn compile<br>编译测试代码：mvn test-compile<br>运行测试：mvn test    </p>
<p>安装第三方包<br>经常有第三方包，因为一些原因，在网上repository上没有，需要自己动手安装。<br>比如sun某些版本的jar文件，比如oracle的驱动。<br>已oracle驱动程序为例，比如驱动路径为c:/driver/ojdbc14.jar，<br>是10.2.0.3.0版本<br>在该网址能够查到：<br><a href="http://www.mvnrepository.com/artifact/com.oracle/ojdbc14" target="_blank" rel="noopener">http://www.mvnrepository.com/artifact/com.oracle/ojdbc14</a><br>artifactId和groupId。<br>mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=10.2.0.3.0 -Dpackaging=jar -Dfile=c:/driver/ojdbc14.jar<br>这样就可以在pom中依赖引用了：  </p>
<p><dependency><br>    <groupid>com.oracle</groupid><br>    <artifactid>ojdbc14</artifactid><br>    <version>10.2.0.3.0</version>  </dependency></p>
<h2 id=""><a href="#" class="headerlink" title="  "></a>  </h2><ol start="10">
<li>mvn commond build  java web project  </li>
</ol>
<p>z.    zero<br>    error:        当使用maven-3.1.0时报引用包错误。找不到xxx-2.0.6<br>    selution:    更换3.2.6就可以了，它引用2.1.0 plugin包  </p>
<p>a. 创建：<br>    mvn archetype:create -DgroupId=com.learn -DartifactId=LearnNew -DarchetypeArtifactId=maven-archetype-webapp<br>    error:        [ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2<br>            .4:create (default-cli) on project standalone-pom: Unable to parse configuration<br>    solution:    可以将 create 换成 generate  </p>
<p>b.    生成elipse项目<br>    mvn eclipse:eclipse<br>    待解决：<br>    error :        缺包<br>                Failed to execute goalk org.apache.maven.plugins:maven-eclipse-plugin:2.1.0<br>    solution:    手动添加jar包到本地仓库<br>    mvn install:install-file -Dfile=jar包的位置 -DgroupId=groupId -DartifactId=artifactId -Dversion=version -Dpackaging=jar  </p>
<p>c.    eclipse 添加maven生成的工程<br>    export-&gt; exists maven project<br>    导入后自动生成 .classpath  .project<br>    但是不能mvn configration file 会报找不到文件错误  </p>
<pre><code>也可以在myeclipse中创建文件  
</code></pre><p>d. 运行：<br>    Run -&gt; mvn install -&gt; run as java application<br>    没有mvn intall则找不到.class类文件<br>    mvn install 是将你打好的jar包安装到你的本地库中，一般没有设置过是在 用户目录下的 .m2\下面。<br>    mvn package 只是将你的代码打包到输出目录，一般的是 target下面  </p>
<p>e. 作为web项目运行<br>   增加MyEclipse的Web Project功能<br>   选择工程–&gt;MyEclipse–&gt;Project Capabilities–&gt;Add Web Project Capabilites，<br>   弹出窗口中设置参数如下，再接下来的弹出窗口中选择yes。<br>   这样我们的工程就是web工程了(注意工程图标有变化，而且MyEclipse自动依赖了JEE的包)。  </p>
<p>f. 修改根路径名<br>   Myeclipse–&gt;Web<br>   这一个是用来修改设置工程的web特性  </p>
<p>g. 当页面还是报404 的时候可能是myeclipse的tomcat缓存<br>    删除tomcat路径下的项目，就可以了  </p>
<hr>
<ol start="11">
<li>Nexus  </li>
</ol>
<p>Synatype Nexus  </p>
<p>maven 配置依赖nexus  </p>
<p><repositories><br>     <repository><br>         <id>nexus</id><br>         <name>Team Nexus Repository</name><br>         <url><a href="http://localhost:8081/nexus/content/groups/public" target="_blank" rel="noopener">http://localhost:8081/nexus/content/groups/public</a></url><br>     </repository><br></repositories>  </p>
<pluginrepositories><br>     <pluginrepository><br>         <id>nexus</id><br>         <name>Team Nexus Repository</name><br>         <url><a href="http://localhost:8081/nexus/content/groups/public" target="_blank" rel="noopener">http://localhost:8081/nexus/content/groups/public</a></url><br>     </pluginrepository><br></pluginrepositories>  

<hr>
<ol start="12">
<li><p>eclipse maven plugin  </p>
<p>1）下载eclipse maven plugin插件<br>2）在eclipse安装文件夹下创建links文件夹  </p>
<pre><code>新建maven.link文件：  
内容为：path=D:/java/eclipse/myplugins/maven  
</code></pre><p>3）在eclipse安装文件夹下创建myplugins文件  </p>
<pre><code>将maven插件解压到当前文件夹下  
</code></pre><p>4）重启eclipse<br>5）配置eclipse maven plugin   </p>
</li>
</ol>
<hr>
<ol start="13">
<li>mvn spring   </li>
</ol>
<p>.classpath<br>    error:<br>        mvn java.lang.ClassNotFoundException: org.springframework.web.context.<br>                  ContextLoaderListener<br>        根本原因是eclipse只是添加了类的引用<br>    1.solution:<br>        项目根目录下的.classpath,找到<br>        <classpathentry kind="con" path="org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER">  </classpathentry></p>
<pre><code>    替换为:  
    &lt;classpathentry kind=&quot;con&quot; path=&quot;org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER&quot;&gt;  
         &lt;attributes&gt;  
             &lt;attribute name=&quot;org.eclipse.jst.component.dependency&quot; value=&quot;/WEB-INF/lib&quot;/&gt;  
         &lt;/attributes&gt;  
    &lt;/classpathentry&gt;  
2.   
    1.右键点击项目--选择Properties选择Deployment（部署） Assembly（程序集）,  
    在右边点击Add按钮，在弹出的窗口中选择Java Build Path Entries  
    2.点击Next，选择Maven Dependencies  
    3.点击Finish，然后可以看到已经把Maven Dependencies添加到Web应用结构中了  
</code></pre><p>添加maven库包的引用  </p>
<classpathentry kind="con" path="org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER">  


<hr>
<ol start="14">
<li><p>mvn update  </p>
<p>1.在eclipse中对项目右键点击 maven –&gt; update dependencies,这样对maven库进行更新。  </p>
<p>2.update Project Configration 会根据maven默认的设置改变项目的配置文件  </p>
<pre><code>例：可以改变.classpath文件  
（不要轻易使用）  
</code></pre></li>
</ol>
<hr>
<ol start="15">
<li><p>eclipse create mvn project  </p>
</li>
<li><p>new-&gt;mvn project  </p>
</li>
<li><p>生成web项目 properties-&gt;project facets-&gt;Dynamic Web Module<br>注意添加的web文件的位置  </p>
</li>
<li><p>配置build path 新建java ，配置编译文件位置,<br>配置java版本  </p>
</li>
<li><p>配置maven引用包编译位置 deployment assembly -&gt;add -&gt; java build enties path  </p>
</li>
<li><p>添加tomcat lib jar  </p>
</li>
<li><p>创建：<br>mvn archetype:create -DgroupId=com.learn -DartifactId=LearnNew -DarchetypeArtifactId=maven-archetype-webapp<br>若是缺少maven-archetype-plugin:2.4:create 则将create变成generate   </p>
</li>
</ol>
<hr>
<p>mvn 引用不到链接sqllserver的jar包<br>    Missing artifact com.microsoft.sqlserver:sqljdbc4:jar:4.0  </p>
<ol>
<li><p>在这个网站下载jdbc驱动包<br> <a href="https://www.microsoft.com/en-us/download/details.aspx?id=11774" target="_blank" rel="noopener">https://www.microsoft.com/en-us/download/details.aspx?id=11774</a>  </p>
</li>
<li><p>手动添加sqlserver jdbc驱动包到mvn仓库中。<br>cd到jar包的路径下  </p>
<pre><code>mvn install:install-file -Dfile=sqljdbc4.jar -DgroupId=com.microsoft.sqlserver -DartifactId=sqljdbc4 -Dversion=4.0 -Dpackaging=jar
</code></pre></li>
</ol>
<hr>
<p>新建maven多子项目，想要添加的子项目不在父项目下(与父项目并行)</p>
<ol>
<li>file–&gt;import–&gt;General–&gt;Existing Project into Workspace</li>
<li>删除掉父项目下的文件夹即可</li>
</ol>
<hr>
</classpathentry></project>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/kafka/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/kafka/" itemprop="url">kafka</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kafka/" itemprop="url" rel="index">
                    <span itemprop="name">kafka</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>kafka<br>  官网：<a href="http://kafka.apache.org" target="_blank" rel="noopener">http://kafka.apache.org</a></p>
<hr>
<h3 id="安装启动"><a href="#安装启动" class="headerlink" title="安装启动"></a>安装启动</h3><ol>
<li>前提条件：<blockquote>
<p>jdk<br>zookeeper(详细在zookeeper.txt中)  </p>
</blockquote>
</li>
</ol>
<h4 id="安装kafka"><a href="#安装kafka" class="headerlink" title="安装kafka"></a>安装kafka</h4><p>下载地址</p>
<p><a href="https://www.apache.org/dyn/closer.cgi?path=/kafka/0.10.2.0/kafka_2.10-0.10.2.0.tgz" target="_blank" rel="noopener">https://www.apache.org/dyn/closer.cgi?path=/kafka/0.10.2.0/kafka_2.10-0.10.2.0.tgz</a></p>
<blockquote>
<p>注意：<br>kafka 2.10-0.10,kafka_2.10-0.9.0.0   对应java8  </p>
</blockquote>
<p><strong>windows 安装问题</strong>  </p>
<ol>
<li>编辑config/serer.properties  </li>
<li>找到并编辑“log.dirs=/tmp/kafka-logs” to   “log.dir=D:\java\kafka\kafka\kafka-logs”  </li>
<li><p>如果Zookeeper在某些其他的机器或集群上运行，可以将“zookeeper.connect:2181”修改为自定义IP与端口。<br>在这个演示中我们使用了同一个机器，因此没必要做修改。文件中的Kafka端口和broker.id也是可以配置的。其他设置不变。  </p>
</li>
<li><p>Kafka会按照默认，在9092端口上运行，并连接zookeeper的默认端口：2181。  </p>
</li>
</ol>
<p><strong>linux 安装问题</strong><br>Unrecognized VM option ‘+UseCompressedOops’ when running   kafka from my ubuntu in vmware<br>解决:<br>vi bin/kafka-run-class.sh  </p>
<p>before removing :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">KAFKA_JVM_PERFORMANCE_OPTS=&quot;-server -XX:+UseCompressedOops </span><br><span class="line">  -XX:+UseParNewGC -XX:+UseConcMarkSweepGC   </span><br><span class="line">  -XX:+CMSClassUnloadingEnabled </span><br><span class="line">  -XX:+CMSScavengeBeforeRemark</span><br><span class="line">  -XX:+DisableExplicitGC </span><br><span class="line">  -Djava.awt.headless=true&quot;</span><br></pre></td></tr></table></figure></p>
<p>after removing :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">KAFKA_JVM_PERFORMANCE_OPTS=&quot;</span><br><span class="line"> -server </span><br><span class="line"> -XX:+UseParNewGC</span><br><span class="line"> -XX:+UseConcMarkSweepGC </span><br><span class="line"> -XX:+CMSClassUnloadingEnabled</span><br><span class="line"> -XX:+CMSScavengeBeforeRemark </span><br><span class="line"> -XX:+DisableExplicitGC</span><br><span class="line"> -Djava.awt.headless=true&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="运行kafka"><a href="#运行kafka" class="headerlink" title="运行kafka"></a>运行kafka</h3><p>重要：确保在启动Kafka服务器前，Zookeeper实例已经准备好并开始运行。  </p>
<p>window启动:  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-server-start.bat  </span><br><span class="line">.\config\server.properties</span><br></pre></td></tr></table></figure>
<p>linux 启动:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh bin/kafka-server-start.sh  </span><br><span class="line">config/server.properties</span><br></pre></td></tr></table></figure></p>
<h3 id="component-组件"><a href="#component-组件" class="headerlink" title="component 组件"></a>component 组件</h3><ol>
<li>topic<br> topic 是在broker站点上新建的因此 无论生产端,消费端都没有配置的权利,<br> 因此在项目中的关于topic配置,只是单纯的与broker站点上的配置相同,不起任何配置性作用.<br> 项目中只能配置producer,customer的相关配置.  </li>
<li>partition：分区编号  </li>
<li>offset：表示该parition已经消费了多少条message  </li>
<li>logSize：表示该partition已经写了多少条message  </li>
<li>Lag：表示有多少条message没有被消费。  </li>
</ol>
<h4 id="producer-配置"><a href="#producer-配置" class="headerlink" title="producer 配置"></a>producer 配置</h4><ol>
<li><p>acks<br>数据 durability 的设置；<br>producer希望leader返回的用于确认请求完成的确认数量. 可选值   all, -1, 0 1. 默认值为1  </p>
<p>acks=0 不需要等待服务器的确认. 这时retries设置无效. 响应里来自服务端的offset总是-1.producer只管发不管发送成功与否。延迟低，容易丢失数据。<br>acks=1 表示leader写入成功（但是并没有刷新到磁盘）后即向producer响应。延迟中等，一旦leader副本挂了，就会丢失数据。  </p>
<p>acks=all 等待数据完成副本的复制, 等同于-1. 假如需要保证消息不丢失, 需要使用该设置. 同时需要置unclean.leader.election.enable为true, 保证当ISR列表为空时, 选择其他存活的副本作为新的leader.  </p>
</li>
<li>producer.type：<br>消息发送类型同步还是异步，默认为同步  </li>
<li>compression.codec：<br>消息的压缩格式，默认为none不压缩，也可以为gzip, snappy, lz4</li>
<li>max.in.flight.requests.per.connection=1<br>同一分区消息乱序：假设a,b两条消息，a先发送后由于发送失败重试，这时顺序就会在b的消息后面，可以设置<br>   <code>max.in.flight.requests.per.connection=1</code><br>来避免<br>max.in.flight.requests.per.connection：<br> 限制客户端在单个连接上能够发送的未响应请求的个数。设置此值是1表示kafka broker在响应请求之前client不能再向同一个broker发送请求，但吞吐量会下降  </li>
</ol>
<p><strong>异步生产者配置</strong>  </p>
<ol>
<li>queue.buffering.max.ms：生产者异步缓存数据的最大时间，单位毫秒  </li>
<li>queue.buffering.max.messages：生产者异步缓存消息的最大容量</li>
<li>queue.enqueue.timeout.ms：队列超时事件。0，如果队列满了就放弃；-ve，如果队列满了就会永远阻塞；+ve，如果队列满了会阻塞一段时间。</li>
<li>batch.num.messages：生产者可以批量处理的消息数</li>
</ol>
<h3 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h3><ol>
<li>auto.commit.enable = true<br>true时，Consumer会在消费消息后将offset同步到zookeeper，这样当Consumer失败后，新的consumer就能从zookeeper获取最新的offset<br>如果设为true，consumer会定时向ZooKeeper发送已经获取到的消息的offset。当consumer进程挂掉时，已经提交的offset可以继续使用，让新的consumer继续工作。  </li>
<li><p>auto.commit.interval.ms = 60 * 1000<br>consumer向ZooKeeper发送offset的时间间隔。自动提交的时间间隔 interval(时间间隔)</p>
</li>
<li><p>rebalance.max.retries 默认值：4<br>当一个新的consumer加入一个consumer group时，会有一个rebalance的操作，导致每一个consumer和partition的关系重新分配。如果这个重分配失败的话，会进行重试，此配置就代表最大的重试次数。</p>
</li>
<li>rebalance.backoff.ms = 2000 默认值：2000<br>每次reblance的时间间隔</li>
<li>refresh.leader.backoff.ms<br>在consumer发现失去某个partition的leader后，在leader选出来前的等待的backoff时间。</li>
</ol>
<p><strong>Consumer Kafka消息消费一致性</strong><br>Kafka消费端的offset主要由consumer来控制, Kafka将每个consumer所监听的tocpic的partition的offset保存在__consumer_offsets主题中. consumer需要将处理完成的消息的offset提交到服务端, 主要有ConsumerCoordinator完成的.  </p>
<p>每次从kafka拉取数据之前, 假如是异步提交offset, 会先调用已经完成的offset commit的callBack, 然后检查ConsumerCoordinator的连接状态. 如果设置了自动提交offset, 会继续上次从服务端获取的数据的offset异步提交到服务端. 这里需要注意的是会有几种情况出现:</p>
<ol>
<li>消息丢失<br>消息处理耗时较多, 假如处理单条消息的耗时为t, 拉取的消息个数为n. t * n &gt; auto_commit_interval_ms, 会导致没有处理完的消息的offset被commit到服务端. 假如此时消费端挂掉, 没有处理完的数据将会丢失.</li>
<li>重复消费<br>假如消息处理完成, offset还未commit到服务端的时候消费端挂掉, 已经处理完的消息会被再次消费.<br>影响着数据一致性和性能<br>业务处理:<br> 去重：将消息的唯一标识保存到外部介质中，每次消费处理时判断是否处理过</li>
<li><p>消息乱序:<br> retry造成的<br> max.in.flight.requests.per.connection = 1<br>  限制客户端在单个连接上能够发送的未响应请求的个数。设置此值是1表示kafka broker在响应请求之前client不能再向同一个broker发送请求<br>  (保证单个partition有序)    </p>
</li>
<li><p>enable.auto.commit 默认为true  </p>
</li>
<li>auto.commit.interval.ms 默认为5000 ms (5s)  </li>
<li>max.poll.records 默认为500  </li>
<li>fetch.max.bytes 默认为52428800 bytes (50Mib).  </li>
</ol>
<p><strong><em>解决方案. </em></strong>  </p>
<ol>
<li><p>把enable.auto.commit设置为false, 并在每处理完一条数据后手动提交offset.<br>这里需要主意的时, 提交的offset是对当前消息的offset基础上进行加1.  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">consumer.commitSync(Collections.singletonMap(<span class="keyword">new</span> TopicPartition(record.topic(), record.partition()), <span class="keyword">new</span> OffsetAndMetadata(record.offset() + <span class="number">1</span>)));</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建线程处理消息<br><strong>kafka partition和consumer数目关系</strong><br>kafka的设计是在一个partition上是不允许并发<br>partiton数目是consumer数目的整数倍<br>kafka只保证在一个partition上数据是有序<br>增减consumer，broker，partition会导致rebalance，所以rebalance后consumer对应的partition会发生变化  </p>
</li>
</ol>
<h3 id="kafka副本问题"><a href="#kafka副本问题" class="headerlink" title="kafka副本问题"></a>kafka副本问题</h3><ol>
<li>发消息过程<br>Producer在发布消息到某个Partition时，先通过ZooKeeper找到该Partition的Leader，然后无论该Topic的Replication Factor为多少（也即该Partition有多少个Replica），Producer只将该消息发送到该Partition的Leader。Leader会将该消息写入其本地Log。每个Follower都从Leader pull数据。这种方式上，Follower存储的数据顺序与Leader保持一致.  </li>
<li>Kafka分配Replica的算法<br> 将所有Broker（假设共n个Broker）和待分配的Partition排序.<br> 将第i个Partition分配到第（i mod n）个Broker上.<br> 将第i个Partition的第j个Replica分配到第（(i + j) mode n）个Broker上.  </li>
</ol>
<h3 id="zookeeper如何管理kafka"><a href="#zookeeper如何管理kafka" class="headerlink" title="zookeeper如何管理kafka"></a>zookeeper如何管理kafka</h3><p>  Producer端使用zookeeper用来”发现”broker列表,以及和Topic下每个partition leader建立socket连接并发送消息.<br>  Broker端使用zookeeper用来注册broker信息,以及监测partition leader存活性.<br>  Consumer端使用zookeeper用来注册consumer信息,其中包括consumer消费的partition列表等,同时也用来发现broker列表,并和partition leader建立socket连接,并获取消息.  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/java web listener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/java web listener/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##java web listener##</p>
<h2 id="在JavaWeb被监听的事件源为：ServletContext、HttpSession、ServletRequest，即三大域对象。"><a href="#在JavaWeb被监听的事件源为：ServletContext、HttpSession、ServletRequest，即三大域对象。" class="headerlink" title="在JavaWeb被监听的事件源为：ServletContext、HttpSession、ServletRequest，即三大域对象。"></a>在JavaWeb被监听的事件源为：ServletContext、HttpSession、ServletRequest，即三大域对象。</h2><p>监听域对象“创建”与“销毁”的监听器；<br>监听域对象“操作域属性”的监听器；<br>监听HttpSession的监听器。</p>
<p>创建与销毁监听器一共有三个：<br>ServletContextListener：Tomcat启动和关闭时调用下面两个方法<br>    public void contextInitialized(ServletContextEvent evt)：ServletContext对象被创建后调用；<br>    public void contextDestroyed(ServletContextEvent evt)：ServletContext对象被销毁前调用；<br>HttpSessionListener：开始会话和结束会话时调用下面两个方法<br>    public void sessionCreated(HttpSessionEvent evt)：HttpSession对象被创建后调用；<br>    public void sessionDestroyed(HttpSessionEvent evt)：HttpSession对象被销毁前调用；<br>ServletRequestListener：开始请求和结束请求时调用下面两个方法<br>    public void requestInitiallized(ServletRequestEvent evt)：ServletRequest对象被创建后调用；<br>    public void requestDestroyed(ServletRequestEvent evt)：ServletRequest对象被销毁前调用。</p>
<hr>
<p>事件对象:<br>ServletContextEvent：ServletContextgetServletContext()；<br>HttpSeessionEvent：HttpSessiongetSession()；<br>ServletRequestEvent：</p>
<hr>
<p>操作域属性的监听器<br>    ServletContextAttributeEvent<br>    HttpSessionBindingEvent<br>    ServletRequestAttributeEvent</p>
<p>————————————-ServletContextAttributeEvent—————-<br>import javax.servlet.ServletContextAttributeEvent;<br>import javax.servlet.ServletContextAttributeListener;<br>public class MyServletContextAttributeListener implements ServletContextAttributeListener{</p>
<pre><code>@Override
public void attributeAdded(ServletContextAttributeEvent arg0) {
    System.out.println(attributeAdded:+arg0.getName()+,+arg0.getValue());
}

@Override
public void attributeRemoved(ServletContextAttributeEvent arg0) {
    System.out.println(attributeRemoved:+arg0.getName()+,+arg0.getValue());
}

@Override
public void attributeReplaced(ServletContextAttributeEvent arg0) {
    //arg0.getValue()为替代之前的值
    //arg0.getServletContext().getAttribute(arg0.getName())为替代之后的值
    System.out.println(attributeReplaced:+arg0.getName()+,+arg0.getValue()
            +,+arg0.getServletContext().getAttribute(arg0.getName()));
}
</code></pre><h2 id=""><a href="#" class="headerlink" title="}"></a>}</h2><p>ServletContext对象</p>
<p>ServletContext对象代表了一个应用，他是一个Context域对象，它里面的方法主要是一些全局性的方法，可以用来存储各个Servlet之间的共享数据。<br>ServletContext对象的应用场景，主要用于Servlet之间数据共享(可以用来做聊天室)，获取web应用的初始化参数，实现Servlet转发，读取资源文件。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/hadoop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="落叶">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大东山下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/11/hadoop/" itemprop="url">hadoop</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T11:50:02+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hadoop/" itemprop="url" rel="index">
                    <span itemprop="name">hadoop</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li>参考:<br>  <a href="http://www.cnblogs.com/wuxun1997/p/6847950.html" target="_blank" rel="noopener">http://www.cnblogs.com/wuxun1997/p/6847950.html</a>  </li>
<li>windows 需要文件<br>  <a href="https://github.com/steveloughran/winutils" target="_blank" rel="noopener">https://github.com/steveloughran/winutils</a><br>  替换bin下的文件,system32下放入hadoop.dll</li>
</ul>
<h3 id="hadoop-启动"><a href="#hadoop-启动" class="headerlink" title="hadoop 启动"></a>hadoop 启动</h3><ol>
<li><p>先启动zookeeper</p>
</li>
<li><p>启动Hadoop集群需要启动HDFS集群和Map/Reduce集群。</p>
<ol>
<li><p>格式化一个新的分布式文件系统：(只能格式化一次,多次会造成put时sid错误.)  </p>
<figure class="highlight plain"><figcaption><span>namenode -format ```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2. 在分配的NameNode上，运行下面的命令启动HDFS：  </span><br><span class="line">  ```  sbin&gt;start-all.cmd</span><br></pre></td></tr></table></figure>
</li>
<li><p>检验</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* sbin&gt;jps</span><br><span class="line">     4944 DataNode</span><br><span class="line">     5860 NodeManager</span><br><span class="line">     3532 Jps</span><br><span class="line">     7852 NameNode</span><br><span class="line">     7932 ResourceManager</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<ol start="3">
<li>监听端口  <ul>
<li><code>与外部程序交互端口</code><br><a href="http://localhost:9000/" target="_blank" rel="noopener">http://localhost:9000/</a> </li>
<li>web 页面访问端口欧<br><a href="http://localhost:50070/" target="_blank" rel="noopener">http://localhost:50070/</a> <code>看hdfs文件</code><br><a href="http://localhost:8088" target="_blank" rel="noopener">http://localhost:8088</a> <code>mapreduce任务</code>  </li>
</ul>
</li>
</ol>
<h3 id="hadoop-shell"><a href="#hadoop-shell" class="headerlink" title="hadoop shell"></a>hadoop shell</h3><h4 id="put"><a href="#put" class="headerlink" title="put"></a>put</h4><p>使用方法：hadoop fs -put <localsrc> … <dst>  </dst></localsrc></p>
<ul>
<li>从本地文件系统中复制单个或多个源路径到目标文件系统。也支持从标准输入中读取输入写入目标文件系统。  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* hadoop fs -put localfile /user/hadoop/hadoopfile  </span><br><span class="line">* hadoop fs -put localfile1 localfile2  </span><br><span class="line"> /user/hadoop/hadoopdir  </span><br><span class="line">* hadoop fs -put localfile  </span><br><span class="line"> hdfs://host:port/hadoop/hadoopfile</span><br><span class="line">* hadoop fs -put - hdfs://host:port/hadoop/hadoopfile</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>从标准输入中读取输入。</p>
<p>返回值：<br>成功返回0，失败返回-1。(我put的时候没有返回值?)    </p>
<p>put 的hadoop 的位置的路径下没有其他文件或目录时,直接替换这个路径,而不是在这个路径下新建文集   </p>
<h4 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h4><p>使用方法：hadoop fs -mkdir <paths>  </paths></p>
<ul>
<li><p>接受路径指定的uri作为参数，创建这些目录。其行为类似于Unix  mkdir -p，它会创建路径中的各级父目录。<br>示例：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* hadoop fs -mkdir /user/hadoop/dir1 /user/hadoop/dir2</span><br><span class="line">* hadoop fs -mkdir hdfs://host1:port1/user/hadoop/dir hdfs://host2:port2/user/hadoop/dir</span><br></pre></td></tr></table></figure>
<p>返回值：<br>成功返回0，失败返回-1。</p>
</li>
</ul>
<p>mkdir多路径的时候(/user/hadoop/dir1) 如果没有父路径则不会新建子目录,会报错</p>
<h3 id="mapreduce-demo"><a href="#mapreduce-demo" class="headerlink" title="mapreduce demo"></a>mapreduce demo</h3><h4 id="运行hadoop官网给的demo-失败"><a href="#运行hadoop官网给的demo-失败" class="headerlink" title="运行hadoop官网给的demo (失败)"></a>运行hadoop官网给的demo (失败)</h4><pre><code>http://hadoop.apache.org/docs/r1.0.4/cn/mapred_tutorial.html  
</code></pre><p>运行应用程序：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; $ bin/hadoop jar /usr/joe/wordcount.jar org.myorg.WordCount /usr/joe/wordcount/input /usr/joe/wordcount/output</span><br></pre></td></tr></table></figure></p>
<p>应该为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; hadoop jar D:\java\hadoop-2.8.1\sbin\hh\hadoop-test-1.0.0.jar hadoop.WordCount /usr/joe/wordcount/input /usr/joe/wordcount/output</span><br></pre></td></tr></table></figure></p>
<p>不用加jar包名称</p>
<p>运行失败 原因:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">8/01/25 18:41:16 INFO mapreduce.Job: Job job_1516876525498_0002 failed with state FAILED due to: Application application_1516876525498_0002 failed 2 times due to AM Container for appattempt_1516876525498_0002_000</span><br><span class="line">002 exited with  exitCode: 5</span><br><span class="line">Failing this attempt.Diagnostics: Exception from container-launch.</span><br><span class="line">Container id: container_1516876525498_0002_02_000001</span><br><span class="line">Exit code: 5</span><br><span class="line">Exception message: AssignProcessToJobObject error (5): ?????</span><br></pre></td></tr></table></figure></p>
<p>未解决文档<br>    <a href="https://wiki.apache.org/hadoop/Hadoop2OnWindows" target="_blank" rel="noopener">https://wiki.apache.org/hadoop/Hadoop2OnWindows</a></p>
<h4 id="运行成功-通过idea运行-成功-demo"><a href="#运行成功-通过idea运行-成功-demo" class="headerlink" title="运行成功 通过idea运行(成功) demo"></a>运行成功 通过idea运行(<code>成功</code>) demo</h4><p><a href="https://www.jianshu.com/p/3e1b398ebfea" target="_blank" rel="noopener">https://www.jianshu.com/p/3e1b398ebfea</a></p>
<p>error:<br>  版本问题(版本低于hadoop环境)<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Server IPC version 9 cannot communicate with client version 4</span><br></pre></td></tr></table></figure></p>
<p>8088 没有监控到运行?  </p>
<ul>
<li>idea 运行的程序都监测不到  </li>
</ul>
<h3 id="map-reduce-计算模型"><a href="#map-reduce-计算模型" class="headerlink" title="map reduce 计算模型"></a>map reduce 计算模型</h3><ul>
<li>执行任务角色:<br>  jobTracker(跟踪器) 调度工作 <code>一个hadoop集群中只有一个</code><br>  taskTracker 执行工作</li>
</ul>
<hr>
<h3 id="lang-comparable-可比较的"><a href="#lang-comparable-可比较的" class="headerlink" title="lang comparable 可比较的"></a>lang comparable 可比较的</h3><p>Comparable 是排序接口。<br>若一个类实现了Comparable接口，就意味着“该类支持排序”。<br> 即然实现Comparable接口的类支持排序，假设现在存在“实现Comparable接口的类的对象的List列表(或数组)”，则该List列表(或数组)可以通过   Collections.sort（或 Arrays.sort）进行排序。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">落叶</p>
              <p class="site-description motion-element" itemprop="description">java redis mysql mybatis</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">落叶</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
